(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(161)}])},161:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return G}});var n=r(5893),a=r(7294),s=r(9008),o=r(682),c=r(4051),i=r(1555),l=r(3680),u=r(2814),d=r(1436),h=r(6698),f=r(6241),m=r.n(f),x=r(9864),p=r.n(x),v=function(e){var t="Internet Voucher",r=null;switch(e.data.type){case"restaurant":t="Restaurant "+t,r=d.fkH;break;case"hotel":t="Hotel "+t,r=d.by_}var a="";if(e.data.expiry){var s=e.data.expiry,o=s.substr(s.length-1);switch(o){case"m":o="minute";break;case"h":o="hour";break;case"d":o="day";break;case"w":o="week";break;case"y":o="year";break;default:o=null}if(o){var l=parseInt(s);a="Valid for ".concat(l," ").concat(o),1!==l&&(a+="s")}else a="Valid for ".concat(s)}return(0,n.jsxs)(i.Z,{className:p().item,children:[(0,n.jsxs)("div",{className:p().header,children:[(0,n.jsxs)("h2",{children:[e.icon?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.G,{icon:e.icon})," "]}):null,e.data.header]}),(0,n.jsx)("p",{children:t})]}),(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(i.Z,{xs:6,className:p().infoHead,children:"Username:"}),(0,n.jsx)(i.Z,{xs:6,children:(0,n.jsx)("samp",{children:e.data.username})})]}),(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(i.Z,{xs:6,className:p().infoHead,children:"Password:"}),(0,n.jsx)(i.Z,{xs:6,children:(0,n.jsx)("samp",{children:e.data.password})})]}),(0,n.jsxs)("p",{className:p().footer,children:[r?(0,n.jsx)(u.G,{fixedWidth:!0,icon:r}):null," ",a]})]})},j=r(8335),y=r.n(j),b=function(e){var t="",r=null;switch(e.data.type){case"restaurant":t="Restaurant: ",r=d.fkH;break;case"hotel":t="Hotel: ",r=d.by_}var a="";if(e.data.expiry){var s=e.data.expiry,o=s.substr(s.length-1);switch(o){case"m":o="minute";break;case"h":o="hour";break;case"d":o="day";break;case"w":o="week";break;case"y":o="year";break;default:o=null}if(o){var l=parseInt(s);a="Valid ".concat(l," ").concat(o),1!==l&&(a+="s")}else a="Valid ".concat(s)}return(0,n.jsxs)(i.Z,{className:y().item,children:[(0,n.jsx)("div",{className:y().header,children:(0,n.jsxs)("h2",{children:[e.icon?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.G,{icon:e.icon})," "]}):null,e.data.header]})}),(0,n.jsxs)(c.Z,{className:y().infoRow,children:[(0,n.jsx)(i.Z,{xs:6,className:y().infoHead,children:"Username:"}),(0,n.jsx)(i.Z,{xs:6,className:y().infoCred,children:(0,n.jsx)("samp",{children:e.data.username})})]}),(0,n.jsxs)(c.Z,{className:y().infoRow,children:[(0,n.jsx)(i.Z,{xs:6,className:y().infoHead,children:"Password:"}),(0,n.jsx)(i.Z,{xs:6,className:y().infoCred,children:(0,n.jsx)("samp",{children:e.data.password})})]}),(0,n.jsxs)("p",{children:[r?(0,n.jsx)(u.G,{fixedWidth:!0,icon:r}):null," ",t+a]})]})};function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},Z=function(e){switch(e){case"default":case"4x12":return{name:"4x12",rows:12,cols:4,capacity:48,component:b};case"3x7":return{name:"3x7",rows:7,cols:3,capacity:21,component:v};default:return null}},P=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==N(t)&&"function"!==typeof t?w(e):t}(this,S(t).call(this,e))).handleCsvSelect=function(e){r.setState({csvData:null,csvError:null},(function(){var t,n=null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.files;if(n&&1===n.length){var a=n[0];if("text/csv"===a.type){var s=new FileReader;s.onload=function(e){var t,n=null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.result;if(n&&"string"===typeof n){var a;try{a=m()(n.trim(),{columns:!0,skip_empty_lines:!0})}catch(d){return void r.setState({csvError:"Invalid CSV format"})}if(a)if(a.length<=0)r.setState({csvError:"CSV has no voucher data"});else{var s=!0,o=!1,c=void 0;try{for(var i,l=a[Symbol.iterator]();!(s=(i=l.next()).done);s=!0){var u=i.value;if(!("Login"in u)||!("Password"in u))return void r.setState({csvError:"Invalid voucher data"})}}catch(h){o=!0,c=h}finally{try{s||null==l.return||l.return()}finally{if(o)throw c}}r.setState({csvData:a}),r.props.onDataLoad&&r.props.onDataLoad(a)}else r.setState({csvError:"CSV parse error"})}else r.setState({csvError:"Could not read CSV file"})},s.readAsText(a)}else r.setState({csvError:"Only CSV files are allowed"})}else r.setState({csvError:"Please select a voucher CSV file"})}))},r.handleFormSubmit=function(e,t){var n=void 0===t?null:t,a=w(r),s=a.props,o=a.state,c=n||o.csvData;if(c){var i=e.header.value;localStorage.setItem("VoucherForm_Header",i),s.onSubmit&&s.onSubmit({layout:r.state.layout,vouchers:c.map((function(t){var r=e.voucher_type.value;if("auto"===r)switch(t.Login.substr(0,1)){case"h":r="hotel";break;case"r":r="restaurant";break;default:r=void 0}return{header:i,username:t.Login,password:t.Password,type:r,expiry:t["Uptime Limit"]}}))})}},r.handlePreview=function(){var e=r.form.current;if(e){for(var t=[],n=0;n<2*r.state.layout.capacity;++n)t.push({Login:"user".concat(n+1),Password:"PREVIEW","Uptime Limit":"69d"});r.handleFormSubmit(e,t)}},r.state={csvData:null,csvError:null,layout:Z("default")},r.form=(0,a.createRef)(),r}var r,s,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),r=t,(s=[{key:"render",value:function(){var e=this,t=this,r=this,a=null;return a=localStorage.getItem("VoucherForm_Header"),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h.Z,{ref:this.form,onSubmit:function(t){t.preventDefault(),e.handleFormSubmit(t.target)},children:[(0,n.jsxs)(h.Z.Group,{className:"mb-3",children:[(0,n.jsx)(h.Z.Label,{children:(0,n.jsx)("b",{children:"Site Name"})}),(0,n.jsx)(h.Z.Control,{type:"text",name:"header",required:!0,placeholder:"SpeedyWiFi",defaultValue:a||void 0})]}),(0,n.jsxs)(h.Z.Group,{controlId:"formFile",className:"mb-3",children:[(0,n.jsx)(h.Z.Label,{children:(0,n.jsx)("b",{children:"Voucher CSV"})}),(0,n.jsx)(h.Z.Control,{type:"file",name:"payload",onChange:this.handleCsvSelect}),this.state.csvError?(0,n.jsx)(h.Z.Text,{className:"text-danger",children:this.state.csvError}):null,this.state.csvData?(0,n.jsxs)(h.Z.Text,{className:"text-success",children:[(0,n.jsx)("b",{children:this.state.csvData.length})," vouchers loaded successfully"]}):null]}),(0,n.jsxs)(h.Z.Group,{className:"mb-3",children:[(0,n.jsx)(h.Z.Label,{children:(0,n.jsx)("b",{children:"Voucher Type"})}),(0,n.jsxs)(h.Z.Select,{name:"voucher_type",children:[(0,n.jsx)("option",{value:"auto",children:"Auto-Detect"}),(0,n.jsx)("option",{value:"restaurant",children:"Restaurant"}),(0,n.jsx)("option",{value:"hotel",children:"Hotel"})]})]}),(0,n.jsxs)(h.Z.Group,{className:"mb-3",children:[(0,n.jsx)(h.Z.Label,{children:(0,n.jsx)("b",{children:"Voucher Layout"})}),(0,n.jsxs)(h.Z.Select,{name:"voucher_layout",value:this.state.layout.name,onChange:function(e){var r=e.target.value;t.setState((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){g(e,t,r[t])}))}return e}({},e,{layout:Z(r)||Z("default")})}))},children:[(0,n.jsx)("option",{value:"4x12",children:"4 x 12 (Compact)"}),(0,n.jsx)("option",{value:"3x7",children:"3 x 7 (Sparse)"})]})]}),(0,n.jsxs)("p",{className:"text-muted mb-3",children:[(0,n.jsx)("b",{children:"Note:"})," One printed A4 page can hold up to"," ",this.state.layout.capacity," vouchers"]}),(0,n.jsxs)("div",{className:"d-grid gap-2",children:[(0,n.jsxs)(l.Z,{variant:"success",size:"lg",type:"submit",disabled:!this.state.csvData,children:[(0,n.jsx)(u.G,{fixedWidth:!0,icon:d.LEp})," Generate"]}),(0,n.jsx)("div",{className:"text-end",children:(0,n.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),r.handlePreview()},children:"Preview Layout"})})]})]})})}}])&&_(r.prototype,s),o&&_(r,o),t}(a.Component),O=r(4994),C=r.n(O);function V(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var E=function(e){var t=e.layout,r=t.rows,a=t.cols,s=e.layout.component,i=V(Array(Math.ceil(e.vouchers.length/a))).map((function(t,r){return e.vouchers.slice(r*a,r*a+a)}));return(0,n.jsxs)(o.Z,{fluid:!0,className:C().container,children:[(0,n.jsxs)("div",{className:C().helper+" text-center mt-4",children:[(0,n.jsxs)(l.Z,{variant:"secondary",onClick:function(){e.onBackClick&&e.onBackClick()},children:[(0,n.jsx)(u.G,{fixedWidth:!0,icon:d.A35})," Go Back"]})," ",(0,n.jsxs)(l.Z,{onClick:function(){return window.print()},children:[(0,n.jsx)(u.G,{fixedWidth:!0,icon:d.wf8})," Print"]})]}),i.map((function(e,t){return(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Z,{children:e.map((function(e,r){return(0,n.jsx)(s,{data:e,icon:d.$Aj},"".concat(t,"_").concat(r))}))}),(t+1)%r===0?(0,n.jsx)("div",{className:C().pagebreak}):null]},t)}))]})};function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){D(e,t,r[t])}))}return e}var G=function(){var e=(0,a.useState)({voucherPageShown:!1,formData:null}),t=e[0],r=e[1];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.default,{children:(0,n.jsx)("title",{children:"WiFi Voucher Generator"})}),t.voucherPageShown&&t.formData?(0,n.jsx)(E,{vouchers:t.formData.vouchers,layout:t.formData.layout,onBackClick:function(){return r(L({},t,{voucherPageShown:!1}))}}):(0,n.jsx)(o.Z,{children:(0,n.jsx)(c.Z,{className:"justify-content-center",children:(0,n.jsxs)(i.Z,{className:"my-4",md:8,lg:6,children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h1",{children:"WiFi Voucher Generator"}),(0,n.jsx)("p",{className:"text-muted",children:"Enter your voucher details below:"})]}),t.formData?(0,n.jsx)("div",{className:"mb-2 text-end",children:(0,n.jsxs)(l.Z,{variant:"outline-secondary",size:"sm",onClick:function(){return r(L({},t,{voucherPageShown:!0}))},children:["Reprint ",(0,n.jsx)(u.G,{fixedWidth:!0,icon:d._tD})]})}):null,(0,n.jsx)(P,{onDataLoad:function(){return r(L({},t,{formData:null}))},onSubmit:function(e){return r(L({},t,{voucherPageShown:!0,formData:e}))}}),(0,n.jsx)("hr",{className:"mt-4"}),(0,n.jsx)("p",{className:"text-muted text-center",children:"\xa9 2021, fluxth"})]})})})]})}},9864:function(e){e.exports={item:"Voucher_item__24Yt4",header:"Voucher_header__nd04p",infoHead:"Voucher_infoHead__3uMEU",footer:"Voucher_footer__IXCSH"}},8335:function(e){e.exports={item:"VoucherCompact_item__1tsS6",header:"VoucherCompact_header__1iMOZ",infoRow:"VoucherCompact_infoRow__zUU0D"}},4994:function(e){e.exports={container:"VoucherPage_container__1yl7M",pagebreak:"VoucherPage_pagebreak__22pYb",helper:"VoucherPage_helper__3dlLL"}},2361:function(){},4616:function(){}},function(e){e.O(0,[774,523,553,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);